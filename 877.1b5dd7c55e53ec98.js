"use strict";(self.webpackChunkdart_scores_counter=self.webpackChunkdart_scores_counter||[]).push([[877],{7877:(M,h,o)=>{o.r(h),o.d(h,{GameStatusModule:()=>A});var T=o(6019),d=o(1880),l=o(607),m=o(4835),p=o(8053),e=o(3668),v=o(1346),f=o(9701);let C=(()=>{class a{constructor(t){this.gameStore=t,this.gameConfig=new f.p,this.gameConfigSubscription=new v.w}ngOnInit(){this.subscribeToGameConfig()}ngOnDestroy(){this.gameConfigSubscription.unsubscribe()}subscribeToGameConfig(){this.gameConfigSubscription=this.gameStore.pipe((0,l.Ys)(m.RO)).pipe((0,p.U)(t=>t.data)).subscribe(t=>this.gameConfig=t)}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(l.yh))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-game-info-bar"]],decls:12,vars:5,consts:[[1,"game-info-bar"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"h1"),e._uU(2),e.qZA(),e._uU(3," Legs: "),e.TgZ(4,"b"),e._uU(5),e.qZA(),e._UZ(6,"br"),e._uU(7," Sets: "),e.TgZ(8,"b"),e._uU(9),e.qZA(),e._UZ(10,"br"),e._UZ(11,"br"),e.qZA()),2&t&&(e.xp6(2),e.Oqu(null==n.gameConfig?null:n.gameConfig.points),e.xp6(3),e.AsE("",null==n.gameConfig||null==n.gameConfig.legs?null:n.gameConfig.legs.mode," ",null==n.gameConfig||null==n.gameConfig.legs?null:n.gameConfig.legs.value,""),e.xp6(4),e.AsE("",null==n.gameConfig||null==n.gameConfig.sets?null:n.gameConfig.sets.mode," ",null==n.gameConfig||null==n.gameConfig.sets?null:n.gameConfig.sets.value,""))},styles:[".game-info-bar[_ngcontent-%COMP%]{border:.5px dotted black;text-align:center;background-color:#c5f1c5cc}"]}),a})();var i=o(9010);const b=new Map([[170,"T20 T20 BULL"],[169,"NO SHOTOUT"],[168,"NO SHOTOUT"],[167,"T20 T19 BULL"],[166,"NO SHOTOUT"],[165,"NO SHOTOUT"],[164,"T20 T18 BULL"],[163,"NO SHOTOUT"],[162,"NO SHOTOUT"],[161,"T20 T17 BULL"],[160,"T20 T20 D20"],[159,"NO SHOTOUT"],[158,"T20 T20 D19"],[157,"T20 T19 D20"],[156,"T20 T20 D18"],[155,"T20 T19 D19"],[154,"T20 T18 D20"],[153,"T20 T19 D18"],[152,"T20 T20 D16"],[151,"T20 T17 D20"],[150,"T20 T18 D18"],[149,"T20 T19 D16"],[148,"T20 T16 D20"],[147,"T19 T18 D18"],[146,"T20 T18 D16"],[145,"T20 T15 D20"],[144,"T18 T18 D18"],[143,"T20 T17 D16"],[142,"T19 T15 D20"],[141,"T18 T17 D18"],[140,"T20 T20 D10"],[139,"T17 T16 D20"],[138,"T18 T16 D18"],[137,"T19 T16 D16"],[136,"T16 T16 D20"],[135,"T18 T15 D18"],[134,"T20 T14 D16"],[133,"T20 T11 D20"],[132,"T20 T12 D18"],[131,"T19 T14 D16"],[130,"T20 20 BULL"],[129,"T19 T12 D18"],[128,"T18 T14 D16"],[127,"T20 T17 D8"],[126,"T19 19 BULL"],[125,"T20 T11 D16"],[124,"T18 20 BULL"],[123,"T19 T10 D18"],[122,"T18 T12 D16"],[121,"T20 T7 D20"],[120,"T20 20 D20"],[119,"T20 19 D20"],[118,"T20 18 D20"],[117,"T20 17 D20"],[116,"T20 16 D20"],[115,"T20 15 D20"],[114,"T20 14 D20"],[113,"T20 13 D20"],[112,"T20 20 D16"],[111,"T20 19 D16"],[110,"T20 18 D16"],[109,"T20 17 D16"],[108,"T20 16 D16"],[107,"T19 BULL"],[106,"T20 14 D16"],[105,"T20 13 D16"],[104,"T18 BULL"],[103,"T20 11 D16"],[102,"T20 10 D16"],[101,"T17 BULL"],[100,"T20 D20"],[99,"T20 7 D16"],[98,"T20 D19"],[97,"T19 D20"],[96,"T20 D18"],[95,"T19 D19"],[94,"T18 D20"],[93,"T19 D18"],[92,"T20 D16"],[91,"T17 D20"],[90,"T18 D18"],[89,"T19 D16"],[88,"T16 D20"],[87,"T17 D18"],[86,"T18 D16"],[85,"T15 D20"],[84,"T16 D18"],[83,"T17 D16"],[82,"BULL D16"],[81,"T15 D18"],[80,"T20 D10"],[79,"T19 D11"],[78,"T18 D12"],[77,"T19 D10"],[76,"T20 D8"],[75,"T17 D12"],[74,"T14 D16"],[73,"T15 D14"],[72,"T12 D18"],[71,"T17 D10"],[70,"T18 D8"],[69,"T19 D6"],[68,"T20 D4"],[67,"T17 D8"],[66,"T10 D18"],[65,"25 D20"],[64,"T16 D8"],[63,"T13 D12"],[62,"T10 D16"],[61,"T7 D20"],[60,"20 D20"],[59,"19 D20"],[58,"18 D20"],[57,"17 D20"],[56,"16 D20"],[55,"15 D20"],[54,"14 D20"],[53,"13 D20"],[52,"20 D16"],[51,"19 D16"],[50,"18 D16"],[49,"17 D16"],[48,"16 D16"],[47,"15 D16"],[46,"14 D16"],[45,"13 D16"],[44,"12 D16"],[43,"11 D16"],[42,"10 D16"],[41,"9 D16"],[40,"D20"],[39,"7 D16"],[38,"D19"],[37,"5 D16"],[36,"D18"],[35,"3 D16"],[34,"D17"],[33,"1 D6"],[32,"D16"],[31,"15 D8"],[30,"D15"],[29,"13 D8"],[28,"D14"],[27,"11 D8"],[26,"D13"],[25,"9 D8"],[24,"D12"],[23,"7 D8"],[22,"D11"],[21,"5 D8"],[20,"D10"],[21,"5 D8"],[19,"3 D8"],[18,"D9"],[17,"1 D8"],[16,"D8"],[15,"7 D4"],[14,"D7"],[13,"5 D4"],[12,"D6"],[11,"3 D4"],[10,"D5"],[9,"1 D4"],[8,"D4"],[7,"3 D2"],[6,"D3"],[5,"1 D2"],[4,"D2"],[3,"1 D1"],[2,"D1"]]);var P=o(6143),g=o(3634),S=o(4099);let N=(()=>{class a{constructor(t){this.gameStore=t,this.gameConfig=new f.p,this.gameStatus=new P.X,this.playerNameWhoStarted="",this.playerNameWhoStartedSubject=new S.X(this.playerNameWhoStarted),this.currentPlayerName="",this.currentPlayerNameSubject=new S.X(this.currentPlayerName),this.gameStore.pipe((0,l.Ys)(m.s$)).subscribe(n=>{this.gameStatus=n.data}),this.gameStore.pipe((0,l.Ys)(m.RO)).subscribe(n=>{this.gameConfig=n.data,this.playerNameWhoStarted=n.data.players[0].name,this.playerNameWhoStartedSubject.next(this.playerNameWhoStarted),this.currentPlayerName=this.playerNameWhoStarted,this.currentPlayerNameSubject.next(this.currentPlayerName)})}updatePlayerPoints(t,n){if(!Number.isInteger(n)||n>180||n<0)return;const s=this.gameStatus.players.find(D=>D.name===t),u=s?this.gameStatus.players.indexOf(s):0;console.log("currentPlayerIndex : "),this.gameStore.dispatch(g.Lm(t,n)),s&&s.currentPoints-n==0&&(this.gameStore.dispatch(g.No(t,1)),this.gameStore.dispatch(g.jM(this.gameConfig)),this.playerNameWhoStarted=this.gameStatus.players[(this.gameConfig.players.findIndex(D=>D.name===this.playerNameWhoStarted)+1)%this.gameStatus.players.length].name,this.playerNameWhoStartedSubject.next(this.playerNameWhoStarted)),this.currentPlayerName=this.gameStatus.players[(u+1)%this.gameStatus.players.length].name,this.currentPlayerNameSubject.next(this.currentPlayerName),this.gameStore.dispatch(g.YJ(t))}getPlayerNameWhoStartedSubject(){return this.playerNameWhoStartedSubject}getCurrentPlayerNameSubject(){return this.currentPlayerNameSubject}}return a.\u0275fac=function(t){return new(t||a)(e.LFG(l.yh))},a.\u0275prov=e.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var c=o(7706),y=o(138);function U(a,r){1&a&&(e.ynx(0),e._UZ(1,"img",5),e.BQk())}function O(a,r){1&a&&e._UZ(0,"img",6)}function Z(a,r){1&a&&(e.TgZ(0,"mat-error"),e._uU(1,"Incorrect number"),e.qZA())}function I(a,r){1&a&&(e.TgZ(0,"mat-error"),e._uU(1,"Points must be in range 0..180!"),e.qZA())}let L=(()=>{class a{constructor(t,n,s){this.formBuilder=t,this.gameStore=n,this.gameStatusManagerService=s,this.name="",this.points="",this.sets="",this.legs="",this.playerPointsForm=new i.cw({}),this.doubleOutCombination="",this.averagePoints="0",this.scoredPoints=[],this.wasStarted=!1,this.isTurn=!1}ngOnInit(){this.playerPointsForm=this.createPlayerPointsForm(),this.gameStore.pipe((0,l.Ys)(m.s$)).pipe((0,p.U)(t=>t.data.players)).subscribe(t=>{var n;const s=t.find(u=>u.name===this.name);this.points=null==s?void 0:s.currentPoints.toString(),this.legs=null==s?void 0:s.legs.toString(),this.sets=null==s?void 0:s.sets.toString(),this.averagePoints=null===(n=null==s?void 0:s.averagePoints3Darts)||void 0===n?void 0:n.toFixed(3),this.scoredPoints=null==s?void 0:s.scoredPoints,this.doubleOutCombination=b.get(Number(this.points))}),this.gameStatusManagerService.getPlayerNameWhoStartedSubject().subscribe(t=>{var n;t===this.name?(console.log("playerName: ",t),null===(n=document.getElementById(`${this.name}-info-container`))||void 0===n||n.focus(),this.wasStarted=!0):this.wasStarted=!1}),this.gameStatusManagerService.getCurrentPlayerNameSubject().subscribe(t=>this.isTurn=t===this.name)}updateCurrentPoints(t){this.gameStatusManagerService.updatePlayerPoints(this.name,t)}createPlayerPointsForm(){return this.formBuilder.group({points:["",{validators:[this.validatePoints()],updateOn:"change"}]})}validatePoints(){return t=>{var n;return(null===(n=t.value)||void 0===n?void 0:n.toString().toLowerCase().includes("."))?(t.setErrors({invalidNumber:!0}),{invalidNumber:!0}):t.value>180||t.value<0?(t.setErrors({wrongNumber:!0}),{wrongNumber:!0}):null}}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(i.qu),e.Y36(l.yh),e.Y36(N))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-player-info"]],inputs:{name:"name",points:"points",sets:"sets",legs:"legs"},decls:19,vars:12,consts:[[1,"player-info",3,"id"],[4,"ngIf"],["src","https://img.icons8.com/emoji/48/000000/green-circle-emoji.png",4,"ngIf"],[3,"formGroup"],["placeholder","Enter score","matInput","","type","number","formControlName","points","step","1",1,"points-input",3,"keydown.enter"],["src","https://img.icons8.com/external-those-icons-lineal-color-those-icons/48/000000/external-dart-sports-those-icons-lineal-color-those-icons.png"],["src","https://img.icons8.com/emoji/48/000000/green-circle-emoji.png"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0),e.YNc(1,U,2,0,"ng-container",1),e.YNc(2,O,1,0,"img",2),e.TgZ(3,"h2"),e._uU(4),e.qZA(),e._uU(5),e.TgZ(6,"h1"),e._uU(7),e.qZA(),e._uU(8),e.TgZ(9,"form",3),e.TgZ(10,"mat-form-field"),e.TgZ(11,"input",4),e.NdJ("keydown.enter",function(){return n.updateCurrentPoints(n.playerPointsForm.value.points)}),e.qZA(),e.YNc(12,Z,2,0,"mat-error",1),e.YNc(13,I,2,0,"mat-error",1),e.qZA(),e.qZA(),e._uU(14," Average: "),e.TgZ(15,"b"),e._uU(16),e.qZA(),e._UZ(17,"br"),e._UZ(18,"br"),e.qZA()),2&t){let s,u;e.MGl("id","",n.name,"-info-container"),e.xp6(1),e.Q6J("ngIf",n.wasStarted),e.xp6(1),e.Q6J("ngIf",n.isTurn),e.xp6(2),e.Oqu(n.name),e.xp6(1),e.AsE(" Legs: ",n.legs," Sets: ",n.sets," "),e.xp6(2),e.Oqu(n.points),e.xp6(1),e.hij("",n.doubleOutCombination," "),e.xp6(1),e.Q6J("formGroup",n.playerPointsForm),e.xp6(3),e.Q6J("ngIf",null==(s=n.playerPointsForm.get("points"))?null:s.hasError("invalidNumber")),e.xp6(1),e.Q6J("ngIf",null==(u=n.playerPointsForm.get("points"))?null:u.hasError("wrongNumber")),e.xp6(3),e.Oqu(n.averagePoints)}},directives:[T.O5,i._Y,i.JL,i.sg,c.KE,y.Nt,i.wV,i.Fj,i.JJ,i.u,c.TO],styles:[".player-info[_ngcontent-%COMP%]{padding:5px;border:1px dotted black;text-align:center;background-color:#fffc}"]}),a})();function G(a,r){if(1&a&&(e.TgZ(0,"div"),e._UZ(1,"app-player-info",2),e._UZ(2,"br"),e.qZA()),2&a){const t=r.$implicit;e.xp6(1),e.s9C("name",t.name),e.s9C("sets",t.sets),e.s9C("legs",t.legs),e.s9C("points",t.currentPoints)}}const B=[{path:"",component:(()=>{class a{constructor(t){this.gameStore=t,this.playersStatus=[]}ngOnInit(){this.getPlayersStatus()}getPlayersStatus(){this.gameStore.pipe((0,l.Ys)(m.s$)).pipe((0,p.U)(t=>t.data.players)).subscribe(t=>{console.log("players: ",t),this.playersStatus=t})}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(l.yh))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-game-status"]],decls:4,vars:1,consts:[[1,"players-list"],[4,"ngFor","ngForOf"],[3,"name","sets","legs","points"]],template:function(t,n){1&t&&(e._UZ(0,"app-game-info-bar"),e._UZ(1,"br"),e.TgZ(2,"div",0),e.YNc(3,G,3,4,"div",1),e.qZA()),2&t&&(e.xp6(3),e.Q6J("ngForOf",n.playersStatus))},directives:[C,T.sg,L],styles:[".players-list[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-around}@media (max-width: 800px){.players-list[_ngcontent-%COMP%]{flex-direction:column}}"]}),a})()}];let j=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[[d.Bz.forChild(B)],d.Bz]}),a})(),A=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[[T.ez,j,y.c,c.lN,i.u5,i.UX]]}),a})()}}]);