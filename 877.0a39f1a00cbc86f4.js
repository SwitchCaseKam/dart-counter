"use strict";(self.webpackChunkdart_scores_counter=self.webpackChunkdart_scores_counter||[]).push([[877],{7877:(A,d,r)=>{r.r(d),r.d(d,{GameStatusModule:()=>I});var g=r(6019),c=r(1880),l=r(607),m=r(4835),D=r(8053),e=r(3668),S=r(1346),f=r(9701);let v=(()=>{class s{constructor(t){this.gameStore=t,this.gameConfig=new f.p,this.gameConfigSubscription=new S.w}ngOnInit(){this.subscribeToGameConfig()}ngOnDestroy(){this.gameConfigSubscription.unsubscribe()}subscribeToGameConfig(){this.gameConfigSubscription=this.gameStore.pipe((0,l.Ys)(m.RO)).pipe((0,D.U)(t=>t.data)).subscribe(t=>this.gameConfig=t)}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(l.yh))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-game-info-bar"]],decls:12,vars:5,consts:[[1,"game-info-bar"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"h1"),e._uU(2),e.qZA(),e._uU(3," Legs: "),e.TgZ(4,"b"),e._uU(5),e.qZA(),e._UZ(6,"br"),e._uU(7," Sets: "),e.TgZ(8,"b"),e._uU(9),e.qZA(),e._UZ(10,"br"),e._UZ(11,"br"),e.qZA()),2&t&&(e.xp6(2),e.Oqu(null==n.gameConfig?null:n.gameConfig.points),e.xp6(3),e.AsE("",null==n.gameConfig||null==n.gameConfig.legs?null:n.gameConfig.legs.mode," ",null==n.gameConfig||null==n.gameConfig.legs?null:n.gameConfig.legs.value,""),e.xp6(4),e.AsE("",null==n.gameConfig||null==n.gameConfig.sets?null:n.gameConfig.sets.mode," ",null==n.gameConfig||null==n.gameConfig.sets?null:n.gameConfig.sets.value,""))},styles:[".game-info-bar[_ngcontent-%COMP%]{border:.5px dotted black;text-align:center;background-color:#c5f1c5cc}"]}),s})();var i=r(9010);const y=new Map([[170,"T20 T20 BULL"],[169,"NO SHOTOUT"],[168,"NO SHOTOUT"],[167,"T20 T19 BULL"],[166,"NO SHOTOUT"],[165,"NO SHOTOUT"],[164,"T20 T18 BULL"],[163,"NO SHOTOUT"],[162,"NO SHOTOUT"],[161,"T20 T17 BULL"],[160,"T20 T20 D20"],[159,"NO SHOTOUT"],[158,"T20 T20 D19"],[157,"T20 T19 D20"],[156,"T20 T20 D18"],[155,"T20 T19 D19"],[154,"T20 T18 D20"],[153,"T20 T19 D18"],[152,"T20 T20 D16"],[151,"T20 T17 D20"],[150,"T20 T18 D18"],[149,"T20 T19 D16"],[148,"T20 T16 D20"],[147,"T19 T18 D18"],[146,"T20 T18 D16"],[145,"T20 T15 D20"],[144,"T18 T18 D18"],[143,"T20 T17 D16"],[142,"T19 T15 D20"],[141,"T18 T17 D18"],[140,"T20 T20 D10"],[139,"T17 T16 D20"],[138,"T18 T16 D18"],[137,"T19 T16 D16"],[136,"T16 T16 D20"],[135,"T18 T15 D18"],[134,"T20 T14 D16"],[133,"T20 T11 D20"],[132,"T20 T12 D18"],[131,"T19 T14 D16"],[130,"T20 20 BULL"],[129,"T19 T12 D18"],[128,"T18 T14 D16"],[127,"T20 T17 D8"],[126,"T19 19 BULL"],[125,"T20 T11 D16"],[124,"T18 20 BULL"],[123,"T19 T10 D18"],[122,"T18 T12 D16"],[121,"T20 T7 D20"],[120,"T20 20 D20"],[119,"T20 19 D20"],[118,"T20 18 D20"],[117,"T20 17 D20"],[116,"T20 16 D20"],[115,"T20 15 D20"],[114,"T20 14 D20"],[113,"T20 13 D20"],[112,"T20 20 D16"],[111,"T20 19 D16"],[110,"T20 18 D16"],[109,"T20 17 D16"],[108,"T20 16 D16"],[107,"T19 BULL"],[106,"T20 14 D16"],[105,"T20 13 D16"],[104,"T18 BULL"],[103,"T20 11 D16"],[102,"T20 10 D16"],[101,"T17 BULL"],[100,"T20 D20"],[99,"T20 7 D16"],[98,"T20 D19"],[97,"T19 D20"],[96,"T20 D18"],[95,"T19 D19"],[94,"T18 D20"],[93,"T19 D18"],[92,"T20 D16"],[91,"T17 D20"],[90,"T18 D18"],[89,"T19 D16"],[88,"T16 D20"],[87,"T17 D18"],[86,"T18 D16"],[85,"T15 D20"],[84,"T16 D18"],[83,"T17 D16"],[82,"BULL D16"],[81,"T15 D18"],[80,"T20 D10"],[79,"T19 D11"],[78,"T18 D12"],[77,"T19 D10"],[76,"T20 D8"],[75,"T17 D12"],[74,"T14 D16"],[73,"T15 D14"],[72,"T12 D18"],[71,"T17 D10"],[70,"T18 D8"],[69,"T19 D6"],[68,"T20 D4"],[67,"T17 D8"],[66,"T10 D18"],[65,"25 D20"],[64,"T16 D8"],[63,"T13 D12"],[62,"T10 D16"],[61,"T7 D20"],[60,"20 D20"],[59,"19 D20"],[58,"18 D20"],[57,"17 D20"],[56,"16 D20"],[55,"15 D20"],[54,"14 D20"],[53,"13 D20"],[52,"20 D16"],[51,"19 D16"],[50,"18 D16"],[49,"17 D16"],[48,"16 D16"],[47,"15 D16"],[46,"14 D16"],[45,"13 D16"],[44,"12 D16"],[43,"11 D16"],[42,"10 D16"],[41,"9 D16"],[40,"D20"],[39,"7 D16"],[38,"D19"],[37,"5 D16"],[36,"D18"],[35,"3 D16"],[34,"D17"],[33,"1 D6"],[32,"D16"],[31,"15 D8"],[30,"D15"],[29,"13 D8"],[28,"D14"],[27,"11 D8"],[26,"D13"],[25,"9 D8"],[24,"D12"],[23,"7 D8"],[22,"D11"],[21,"5 D8"],[20,"D10"],[21,"5 D8"],[19,"3 D8"],[18,"D9"],[17,"1 D8"],[16,"D8"],[15,"7 D4"],[14,"D7"],[13,"5 D4"],[12,"D6"],[11,"3 D4"],[10,"D5"],[9,"1 D4"],[8,"D4"],[7,"3 D2"],[6,"D3"],[5,"1 D2"],[4,"D2"],[3,"1 D1"],[2,"D1"]]);var C=r(6143),T=r(3634),b=r(3405);let O=(()=>{class s{constructor(t){this.gameStore=t,this.gameConfig=new f.p,this.gameStatus=new C.X,this.playerNameWhoStartedSubject=new b.xQ,this.gameStore.pipe((0,l.Ys)(m.s$)).subscribe(n=>{this.gameStatus=n.data,this.playerNameWhoStartedSubject.next(this.gameStatus.players[0].name)}),this.gameStore.pipe((0,l.Ys)(m.RO)).subscribe(n=>this.gameConfig=n.data)}updatePlayerPoints(t,n){if(!Number.isInteger(n)||n>180||n<0)return;const a=this.gameStatus.players.find(B=>B.name===t),u=a?this.gameStatus.players.indexOf(a):0;this.gameStore.dispatch(T.Lm(t,n)),a&&a.currentPoints-n==0&&(this.gameStore.dispatch(T.No(t,1)),this.gameStore.dispatch(T.jM(this.gameConfig)),this.playerNameWhoStartedSubject.next(this.gameStatus.players[(u+1)%this.gameStatus.players.length].name)),this.gameStore.dispatch(T.YJ(t))}getPlayerNameWhoStartedSubject(){return this.playerNameWhoStartedSubject.asObservable()}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(l.yh))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();var p=r(7706),h=r(138);function U(s,o){1&s&&(e.TgZ(0,"mat-error"),e._uU(1,"Incorrect number"),e.qZA())}function P(s,o){1&s&&(e.TgZ(0,"mat-error"),e._uU(1,"Points must be in range 0..180!"),e.qZA())}let Z=(()=>{class s{constructor(t,n,a){this.formBuilder=t,this.gameStore=n,this.gameStatusManagerService=a,this.name="",this.points="",this.sets="",this.legs="",this.playerPointsForm=new i.cw({}),this.doubleOutCombination="",this.averagePoints="0",this.scoredPoints=[]}ngOnInit(){this.playerPointsForm=this.createPlayerPointsForm(),this.gameStore.pipe((0,l.Ys)(m.s$)).pipe((0,D.U)(t=>t.data.players)).subscribe(t=>{var n;console.log("players: ",t);const a=t.find(u=>u.name===this.name);this.points=null==a?void 0:a.currentPoints.toString(),this.legs=null==a?void 0:a.legs.toString(),this.sets=null==a?void 0:a.sets.toString(),this.averagePoints=null===(n=null==a?void 0:a.averagePoints)||void 0===n?void 0:n.toFixed(3),this.scoredPoints=null==a?void 0:a.scoredPoints,this.doubleOutCombination=y.get(Number(this.points))}),this.gameStatusManagerService.getPlayerNameWhoStartedSubject().subscribe(t=>{var n;t===this.name&&(null===(n=document.getElementById(`${this.name}-info-container`))||void 0===n||n.focus())})}updateCurrentPoints(t){this.gameStatusManagerService.updatePlayerPoints(this.name,t)}createPlayerPointsForm(){return this.formBuilder.group({points:["",{validators:[this.validatePoints()],updateOn:"change"}]})}validatePoints(){return t=>{var n;return(null===(n=t.value)||void 0===n?void 0:n.toString().toLowerCase().includes("."))?(t.setErrors({invalidNumber:!0}),{invalidNumber:!0}):t.value>180||t.value<0?(t.setErrors({wrongNumber:!0}),{wrongNumber:!0}):null}}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(i.qu),e.Y36(l.yh),e.Y36(O))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-player-info"]],inputs:{name:"name",points:"points",sets:"sets",legs:"legs"},decls:17,vars:10,consts:[[1,"player-info",3,"id"],[3,"formGroup"],["placeholder","Enter score","matInput","","type","number","formControlName","points","step","1",1,"points-input",3,"keydown.enter"],[4,"ngIf"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"h2"),e._uU(2),e.qZA(),e._uU(3),e.TgZ(4,"h1"),e._uU(5),e.qZA(),e._uU(6),e.TgZ(7,"form",1),e.TgZ(8,"mat-form-field"),e.TgZ(9,"input",2),e.NdJ("keydown.enter",function(){return n.updateCurrentPoints(n.playerPointsForm.value.points)}),e.qZA(),e.YNc(10,U,2,0,"mat-error",3),e.YNc(11,P,2,0,"mat-error",3),e.qZA(),e.qZA(),e._uU(12," Average: "),e.TgZ(13,"b"),e._uU(14),e.qZA(),e._UZ(15,"br"),e._UZ(16,"br"),e.qZA()),2&t){let a,u;e.MGl("id","",n.name,"-info-container"),e.xp6(2),e.Oqu(n.name),e.xp6(1),e.AsE(" Legs: ",n.legs," Sets: ",n.sets," "),e.xp6(2),e.Oqu(n.points),e.xp6(1),e.hij("",n.doubleOutCombination," "),e.xp6(1),e.Q6J("formGroup",n.playerPointsForm),e.xp6(3),e.Q6J("ngIf",null==(a=n.playerPointsForm.get("points"))?null:a.hasError("invalidNumber")),e.xp6(1),e.Q6J("ngIf",null==(u=n.playerPointsForm.get("points"))?null:u.hasError("wrongNumber")),e.xp6(3),e.Oqu(n.averagePoints)}},directives:[i._Y,i.JL,i.sg,p.KE,h.Nt,i.wV,i.Fj,i.JJ,i.u,g.O5,p.TO],styles:[".player-info[_ngcontent-%COMP%]{padding:5px;border:1px dotted black;text-align:center;background-color:#fffc}"]}),s})();function L(s,o){if(1&s&&(e.TgZ(0,"div"),e._UZ(1,"app-player-info",2),e._UZ(2,"br"),e.qZA()),2&s){const t=o.$implicit;e.xp6(1),e.s9C("name",t.name),e.s9C("sets",t.sets),e.s9C("legs",t.legs),e.s9C("points",t.currentPoints)}}const G=[{path:"",component:(()=>{class s{constructor(t){this.gameStore=t,this.playersStatus=[]}ngOnInit(){this.getPlayersStatus()}getPlayersStatus(){this.gameStore.pipe((0,l.Ys)(m.s$)).pipe((0,D.U)(t=>t.data.players)).subscribe(t=>{console.log("players: ",t),this.playersStatus=t})}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(l.yh))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-game-status"]],decls:4,vars:1,consts:[[1,"players-list"],[4,"ngFor","ngForOf"],[3,"name","sets","legs","points"]],template:function(t,n){1&t&&(e._UZ(0,"app-game-info-bar"),e._UZ(1,"br"),e.TgZ(2,"div",0),e.YNc(3,L,3,4,"div",1),e.qZA()),2&t&&(e.xp6(3),e.Q6J("ngForOf",n.playersStatus))},directives:[v,g.sg,Z],styles:[".players-list[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-around}@media (max-width: 800px){.players-list[_ngcontent-%COMP%]{flex-direction:column}}"]}),s})()}];let N=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[[c.Bz.forChild(G)],c.Bz]}),s})(),I=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[[g.ez,N,h.c,p.lN,i.u5,i.UX]]}),s})()}}]);