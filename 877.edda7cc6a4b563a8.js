"use strict";(self.webpackChunkdart_scores_counter=self.webpackChunkdart_scores_counter||[]).push([[877],{7877:(A,c,r)=>{r.r(c),r.d(c,{GameStatusModule:()=>B});var T=r(6019),f=r(1880),l=r(607),m=r(4835),p=r(8053),e=r(3668),S=r(1346),d=r(9701);let y=(()=>{class o{constructor(t){this.gameStore=t,this.gameConfig=new d.p,this.gameConfigSubscription=new S.w}ngOnInit(){this.subscribeToGameConfig()}ngOnDestroy(){this.gameConfigSubscription.unsubscribe()}subscribeToGameConfig(){this.gameConfigSubscription=this.gameStore.pipe((0,l.Ys)(m.RO)).pipe((0,p.U)(t=>t.data)).subscribe(t=>this.gameConfig=t)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(l.yh))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-game-info-bar"]],decls:12,vars:5,consts:[[1,"game-info-bar"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"h1"),e._uU(2),e.qZA(),e._uU(3," Legs: "),e.TgZ(4,"b"),e._uU(5),e.qZA(),e._UZ(6,"br"),e._uU(7," Sets: "),e.TgZ(8,"b"),e._uU(9),e.qZA(),e._UZ(10,"br"),e._UZ(11,"br"),e.qZA()),2&t&&(e.xp6(2),e.Oqu(null==n.gameConfig?null:n.gameConfig.points),e.xp6(3),e.AsE("",null==n.gameConfig||null==n.gameConfig.legs?null:n.gameConfig.legs.mode," ",null==n.gameConfig||null==n.gameConfig.legs?null:n.gameConfig.legs.value,""),e.xp6(4),e.AsE("",null==n.gameConfig||null==n.gameConfig.sets?null:n.gameConfig.sets.mode," ",null==n.gameConfig||null==n.gameConfig.sets?null:n.gameConfig.sets.value,""))},styles:[".game-info-bar[_ngcontent-%COMP%]{border:.5px dotted black;text-align:center;background-color:#c5f1c5cc}"]}),o})();var i=r(9010);const v=new Map([[170,"T20 T20 BULL"],[169,"NO SHOTOUT"],[168,"NO SHOTOUT"],[167,"T20 T19 BULL"],[166,"NO SHOTOUT"],[165,"NO SHOTOUT"],[164,"T20 T18 BULL"],[163,"NO SHOTOUT"],[162,"NO SHOTOUT"],[161,"T20 T17 BULL"],[160,"T20 T20 D20"],[159,"NO SHOTOUT"],[158,"T20 T20 D19"],[157,"T20 T19 D20"],[156,"T20 T20 D18"],[155,"T20 T19 D19"],[154,"T20 T18 D20"],[153,"T20 T19 D18"],[152,"T20 T20 D16"],[151,"T20 T17 D20"],[150,"T20 T18 D18"],[149,"T20 T19 D16"],[148,"T20 T16 D20"],[147,"T19 T18 D18"],[146,"T20 T18 D16"],[145,"T20 T15 D20"],[144,"T18 T18 D18"],[143,"T20 T17 D16"],[142,"T19 T15 D20"],[141,"T18 T17 D18"],[140,"T20 T20 D10"],[139,"T17 T16 D20"],[138,"T18 T16 D18"],[137,"T19 T16 D16"],[136,"T16 T16 D20"],[135,"T18 T15 T18"],[134,"T20 T14 D16"],[133,"T20 T11 D20"],[132,"T20 T12 D18"],[131,"T19 T14 D16"],[130,"T20 20 BULL"],[129,"T19 T12 D18"],[128,"T18 T14 D16"],[127,"T20 T17 D8"],[126,"T19 19 BULL"],[125,"T20 T11 D16"],[124,"T18 20 BULL"],[123,"T19 T10 D18"],[122,"T18 T12 D16"],[121,"T20 T7 D20"],[120,"T20 20 D20"],[119,"T20 19 D20"],[118,"T20 18 D20"],[117,"T20 17 D20"],[116,"T20 16 D20"],[115,"T20 15 D20"],[114,"T20 14 D20"],[113,"T20 13 D20"],[112,"T20 20 D16"],[111,"T20 19 D16"],[110,"T20 18 D16"],[109,"T20 17 16"],[108,"T20 16 D16"],[107,"T19 BULL"],[106,"T20 14 D16"],[105,"T20 13 D16"],[104,"T18 BULL"],[103,"T20 11 D16"],[102,"T20 10 D16"],[101,"T17 BULL"],[100,"T20 D20"],[99,"T20 7 D16"],[98,"T20 D19"],[97,"T19 D20"],[96,"T20 D18"],[95,"T19 D19"],[94,"T18 D20"],[93,"T19 D18"],[92,"T20 D16"],[91,"T17 D20"],[90,"T18 D18"],[89,"T19 D16"],[88,"T16 D20"],[87,"T17 D18"],[86,"T18 D16"],[85,"T15 D20"],[84,"T16 D18"],[83,"T17 D16"],[82,"BULL D16"],[81,"T15 D18"],[80,"T20 D10"],[79,"T19 D11"],[78,"T18 D12"],[77,"T19 D10"],[76,"T20 D8"],[75,"T17 D12"],[74,"T14 D16"],[73,"T15 D14"],[72,"T12 D18"],[71,"T17 D10"],[70,"T18 D8"],[69,"T19 D6"],[68,"T20 D4"],[67,"T17 D8"],[66,"T10 D18"],[65,"25 D20"],[64,"T16 D8"],[63,"T13 D12"],[62,"T10 D16"],[61,"T7 D20"],[60,"20 D20"],[59,"19 D20"],[58,"18 D20"],[57,"17 D20"],[56,"16 D20"],[55,"15 D20"],[54,"14 D20"],[53,"13 D20"],[52,"20 D16"],[51,"19 D16"],[50,"18 D16"],[49,"17 D16"],[48,"16 D16"],[47,"15 D16"],[46,"14 D16"],[45,"13 D16"],[44,"12 D16"],[43,"11 D16"],[42,"10 D16"],[41,"9 D16"],[40,"D20"],[39,"7 D16"],[38,"D19"],[37,"5 D16"],[36,"D18"],[35,"3 D16"],[34,"D17"],[33,"1 D6"],[32,"D16"],[31,"15 D8"],[30,"D15"],[29,"13 D8"],[28,"D14"],[27,"11 D8"],[26,"D13"],[25,"9 D8"],[24,"D12"],[23,"7 D8"],[22,"D11"],[21,"5 D8"],[20,"D10"],[21,"5 D8"],[19,"3 D8"],[18,"D9"],[17,"1 D8"],[16,"D8"],[15,"7 D4"],[14,"D7"],[13,"5 D4"],[12,"D6"],[11,"3 D4"],[10,"D5"],[9,"1 D4"],[8,"D4"],[7,"3 D2"],[6,"D3"],[5,"1 D2"],[4,"D2"],[3,"1 D1"],[2,"D1"]]);var C=r(6143),g=r(3634),b=r(3405);let O=(()=>{class o{constructor(t){this.gameStore=t,this.gameConfig=new d.p,this.gameStatus=new C.X,this.playerNameWhoStartedSubject=new b.xQ,this.gameStore.pipe((0,l.Ys)(m.s$)).subscribe(n=>{this.gameStatus=n.data,this.playerNameWhoStartedSubject.next(this.gameStatus.players[0].name)}),this.gameStore.pipe((0,l.Ys)(m.RO)).subscribe(n=>this.gameConfig=n.data)}updatePlayerPoints(t,n){if(!Number.isInteger(n)||n>180)return;const s=this.gameStatus.players.find(F=>F.name===t),u=s?this.gameStatus.players.indexOf(s):0;this.gameStore.dispatch(g.Lm(t,n)),s&&s.currentPoints-n==0&&(this.gameStore.dispatch(g.No(t,1)),this.gameStore.dispatch(g.jM(this.gameConfig)),this.playerNameWhoStartedSubject.next(this.gameStatus.players[(u+1)%this.gameStatus.players.length].name)),this.gameStore.dispatch(g.YJ(t))}getPlayerNameWhoStartedSubject(){return this.playerNameWhoStartedSubject.asObservable()}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(l.yh))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var D=r(7706),h=r(138);function U(o,a){1&o&&(e.TgZ(0,"mat-error"),e._uU(1,"Incorrect number"),e.qZA())}function P(o,a){1&o&&(e.TgZ(0,"mat-error"),e._uU(1,"Max value 180!"),e.qZA())}function Z(o,a){if(1&o&&(e.ynx(0),e._uU(1),e.BQk()),2&o){const t=a.$implicit;e.xp6(1),e.hij(" ",t,", ")}}let L=(()=>{class o{constructor(t,n,s){this.formBuilder=t,this.gameStore=n,this.gameStatusManagerService=s,this.name="",this.points="",this.sets="",this.legs="",this.playerPointsForm=new i.cw({}),this.doubleOutCombination="",this.averagePoints="0",this.scoredPoints=[]}ngOnInit(){this.playerPointsForm=this.createPlayerPointsForm(),this.gameStore.pipe((0,l.Ys)(m.s$)).pipe((0,p.U)(t=>t.data.players)).subscribe(t=>{var n;console.log("players: ",t);const s=t.find(u=>u.name===this.name);this.points=null==s?void 0:s.currentPoints.toString(),this.legs=null==s?void 0:s.legs.toString(),this.sets=null==s?void 0:s.sets.toString(),this.averagePoints=null===(n=null==s?void 0:s.averagePoints)||void 0===n?void 0:n.toFixed(3),this.scoredPoints=null==s?void 0:s.scoredPoints,this.doubleOutCombination=v.get(Number(this.points))}),this.gameStatusManagerService.getPlayerNameWhoStartedSubject().subscribe(t=>{var n;t===this.name&&(null===(n=document.getElementById(`${this.name}-info-container`))||void 0===n||n.focus())})}updateCurrentPoints(t){console.log(t),this.gameStatusManagerService.updatePlayerPoints(this.name,t)}createPlayerPointsForm(){return this.formBuilder.group({points:["",{validators:[this.validatePoints()],updateOn:"change"}]})}validatePoints(){return t=>{var n;return(null===(n=t.value)||void 0===n?void 0:n.toString().toLowerCase().includes("."))?(t.setErrors({invalidNumber:!0}),{invalidNumber:!0}):t.value>180?(t.setErrors({wrongNumber:!0}),{wrongNumber:!0}):null}}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(i.qu),e.Y36(l.yh),e.Y36(O))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-player-info"]],inputs:{name:"name",points:"points",sets:"sets",legs:"legs"},decls:19,vars:11,consts:[[1,"player-info",3,"id"],[3,"formGroup"],["placeholder","Pass points","matInput","","type","number","formControlName","points","step","1",1,"points-input",3,"keydown.enter"],[4,"ngIf"],[4,"ngFor","ngForOf"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"h2"),e._uU(2),e.qZA(),e._uU(3),e.TgZ(4,"h1"),e._uU(5),e.qZA(),e._uU(6),e.TgZ(7,"form",1),e.TgZ(8,"mat-form-field"),e.TgZ(9,"input",2),e.NdJ("keydown.enter",function(){return n.updateCurrentPoints(n.playerPointsForm.value.points)}),e.qZA(),e.YNc(10,U,2,0,"mat-error",3),e.YNc(11,P,2,0,"mat-error",3),e.qZA(),e.qZA(),e._uU(12," Average: "),e.TgZ(13,"b"),e._uU(14),e.qZA(),e._UZ(15,"br"),e._uU(16," Points: "),e.YNc(17,Z,2,1,"ng-container",4),e._UZ(18,"br"),e.qZA()),2&t){let s,u;e.MGl("id","",n.name,"-info-container"),e.xp6(2),e.Oqu(n.name),e.xp6(1),e.AsE(" Legs: ",n.legs," Sets: ",n.sets," "),e.xp6(2),e.Oqu(n.points),e.xp6(1),e.hij("",n.doubleOutCombination," "),e.xp6(1),e.Q6J("formGroup",n.playerPointsForm),e.xp6(3),e.Q6J("ngIf",null==(s=n.playerPointsForm.get("points"))?null:s.hasError("invalidNumber")),e.xp6(1),e.Q6J("ngIf",null==(u=n.playerPointsForm.get("points"))?null:u.hasError("wrongNumber")),e.xp6(3),e.Oqu(n.averagePoints),e.xp6(3),e.Q6J("ngForOf",n.scoredPoints)}},directives:[i._Y,i.JL,i.sg,D.KE,h.Nt,i.wV,i.Fj,i.JJ,i.u,T.O5,T.sg,D.TO],styles:[".player-info[_ngcontent-%COMP%]{padding:5px;border:1px dotted black;text-align:center;background-color:#fffc}"]}),o})();function N(o,a){if(1&o&&(e.TgZ(0,"div"),e._UZ(1,"app-player-info",2),e._UZ(2,"br"),e.qZA()),2&o){const t=a.$implicit;e.xp6(1),e.s9C("name",t.name),e.s9C("sets",t.sets),e.s9C("legs",t.legs),e.s9C("points",t.currentPoints)}}const G=[{path:"",component:(()=>{class o{constructor(t){this.gameStore=t,this.playersStatus=[]}ngOnInit(){this.getPlayersStatus()}getPlayersStatus(){this.gameStore.pipe((0,l.Ys)(m.s$)).pipe((0,p.U)(t=>t.data.players)).subscribe(t=>{console.log("players: ",t),this.playersStatus=t})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(l.yh))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-game-status"]],decls:4,vars:1,consts:[[1,"players-list"],[4,"ngFor","ngForOf"],[3,"name","sets","legs","points"]],template:function(t,n){1&t&&(e._UZ(0,"app-game-info-bar"),e._UZ(1,"br"),e.TgZ(2,"div",0),e.YNc(3,N,3,4,"div",1),e.qZA()),2&t&&(e.xp6(3),e.Q6J("ngForOf",n.playersStatus))},directives:[y,T.sg,L],styles:[".players-list[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-around}@media (max-width: 800px){.players-list[_ngcontent-%COMP%]{flex-direction:column}}"]}),o})()}];let I=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[f.Bz.forChild(G)],f.Bz]}),o})(),B=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[T.ez,I,h.c,D.lN,i.u5,i.UX]]}),o})()}}]);